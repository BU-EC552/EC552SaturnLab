Living cells communicate by secreting diffusible signalling molecules that activate key molecular processes in neighbouring cells,. These molecular communication channels facilitate information distribution among cells, enabling collective information processing functions that cannot be achieved by cells in isolation,. Synthetic biologists have advanced the engineering of synthetic cell-cell communication systems based on living cells resulting in multicellular consortia capable of complex sender-receiving functions–, bidirectional, and synchronized communication and distributed computations,,. However, engineering synthetic gene networks in living cells remains challenging due to the large number of context dependent effects arising from, among others, competition between shared resources and loading effects. In contrast, developing molecular communication channels among abiotic synthetic protocell compartments has received much less attention than in living systems,. Due to their minimalistic design, engineering collective information processing functions in fully synthetic multicellular communities has several advantages including a high degree of control and reduced design-build-test cycles. Abiotic protocellular consortia, based on lipid or non-lipid compartments and wired by orthogonal molecular communication channels, would thus present a versatile technology for the bottom-up construction of complex cell-population behaviors,,. Although some elegant strategies to achieve one-way intercellular communication in fully synthetic protocellular systems have been reported,,,, a scalable methodology for implementing collective functions involving bidirectional communication across populations of protocells is currently lacking. Here, we present Biomolecular Implementation of Protocellular Communication (BIO-PC), a highly programmable protocellular messaging system that enables the construction of biochemical communication devices with collective information-processing functions. BIO-PC is based on protein-based microcapsules called proteinosomes, containing internalized molecular circuits that encode and decode orthogonal chemical messages based on short single-stranded nucleic acids (). Initial experiments () revealed that proteinosomes, in contrast to liposomes, are permeable to short (<100 base) single-stranded DNA (ssDNA), making them highly suitable for the development of a protocellular communication platform. To code and decode ssDNA messages between individual protocells, we leveraged the modularity and scalability of dynamic DNA nanotechnology based on enzyme-free, toehold-mediated strand displacement., The high programmability and predictability of DNA strand-displacement (DSD) reactions allow the design of molecular circuits exhibiting a wide range of dynamic functions including catalytic cascades, digital logic circuits, Boolean neural networks, control algorithms and oscillations. While molecular communication among localized enzyme-free, and enzyme-driven DNA circuits has been reported, previous strategies were based on grafting DNA templates onto micrometre-sized beads. These examples elegantly show the possibilities of engineering collective behaviour among amorphous agents; however, particle-based systems do not allow straightforward tuning of population dynamics and function suboptimally in biologically relevant media, since grafted DNA strands are directly exposed to the environment. Using BIO-PC, we experimentally demonstrate a scalable framework for bidirectional communication in populations of semipermeable microcapsules. We use microfluidic trapping devices to congregate protocellular communities capable of collective functions such as multiplex sensing, cascaded amplification, bidirectional communication and distributed logic operations () and reveal how population dynamics can be easily tuned by controlling the compartment permeability. Finally, we show that encapsulating DNA gates inside proteinosomes makes them less vulnerable to digestion by nucleases, thereby greatly increasing their lifetime in concentrated serum and thus opening the way for the development of cell-like autonomous molecular sensors and controllers under physiological conditions. Encapsulation and Remote Activation of DNA Circuits To establish a highly programmable protocellular messaging system, we localized DNA gates inside proteinosomes using the high-affinity, non-covalent interaction between biotin and streptavidin (). Confocal fluorescence imaging of FITC-labelled proteinosomes in combination with fluorescence recovery after photobleaching (FRAP) experiments revealed that the polydisperse microcapsules have well-defined membranes consisting of cross-linked BSA-polymer amphiphiles and liquid-like interiors that contain excess BSA conjugate and streptavidin (). Using fluorescently labelled streptavidin (MW 52.8 kDa), we verified that the encapsulation of streptavidin inside the proteinosomes is stable for more than a month (). Proteinosomes containing encapsulated DNA were prepared by adding short (MW < 20 kDa), biotinylated ssDNA strands that can diffuse through the semipermeable membrane and anchor to the encapsulated streptavidin (). Excess DNA was removed by sedimentation and washing, yielding proteinosomes containing internalized DNA with an overall loading efficiency between 30-50% () and which can be stored at 4 °C for more than a month without significant DNA loss (). To assess the feasibility of implementing DSD-circuits inside proteinosomes, we started by characterizing the performance of a simple toehold-mediated strand-displacement reaction. An inactivated DNA gate complex (), consisting of a fluorophore (Cy5)-modified gate strand () with an exposed toehold domain and a quencher-labelled output strand () was localized inside the proteinosomes (). To enable long term observation of reaction kinetics, we designed a microfluidic platform capable of single-protocell capture, activation and imaging ( and ). In addition to providing control over protocell population density and restricting their movement, the device removes abnormally large and small proteinosomes, allowing analysis of a more homogeneous population of protocells (). To initiate DSD within the captured protocells, a membrane-permeable complementary input strand () was flowed into the microfluidic device, resulting in an increase in Cy5 fluorescence for each protocell over time due to displacement of  and formation of the activated  complex (, red lines). Importantly, a control experiment employing a fluorescently-labelled input strand with a non-complementary toehold domain showed that DNA strands can diffuse across the proteinosome membrane but fail to displace the output strand to a considerable level (). Together, these results establish that encapsulated DNA gates are activated via a two-step process, in which input strands first diffuse across the protocell membrane and subsequently initiate DSD reactions. Supplementary movie 1, Supplementary Fig. 5 Compared to other types of localized DNA circuits on surfaces, microparticles or DNA origami,, encapsulating DNA circuits inside proteinosomes introduces the membrane permeability constant () as an additional parameter in the reaction kinetics. We therefore explored whether we could alter membrane permeability to tune the overall dynamics of the DSD reaction. Using a shorter crosslinking agent (BS(PEG)5) significantly reduced the rate of the proteinosome-encapsulated DSD reactions (, light blue traces). Comparing the experimental traces shows that DNA gate activation dynamics are markedly different between the high- and low- proteinosomes. While high- proteinosomes display exponential DNA gate activation kinetics, typical for non-compartmentalized DSD reactions, low- proteinosomes show linear kinetic profiles until high levels of DNA gate activation are attained. To rationalize the influence of membrane permeability on the strand-displacement kinetics, the input strand  was labelled with Alexa546. This allowed us to simultaneously observe diffusion of  into the protocells as well as intra-protocellular activation of the  DNA gate by toehold mediated displacement of the quencher strand (). We first estimated the value of  for each individual proteinosome assuming Fickian diffusion (). The analysis shows that the permeability constant for the input strand is approximately two orders of magnitude smaller in the low- proteinosomes. Using the estimated permeability constants and a bimolecular approximation for the DSD reaction, we constructed a simple ODE model that describes the time-dependent activation of the encapsulated DNA gate (, ) and obtained estimates for the bimolecular rate constant  for each protocell (). The simple two-parameter kinetic model describes the experimental traces very well for both proteinosome types (, dark red and dark blue traces) and, importantly, reveals that both populations have similar strand-displacement rate constants. These results indicate that the rate-determining step in low- proteinosomes is the input diffusion across the membrane, while in high- proteinosomes it is the DSD reaction. Collectively, these findings establish BIO-PC as a versatile platform that allows compartmentalized DNA gates to be actuated by complementary DNA-based messages, the dynamics of which can be tuned by protocellular membrane permeability. Cascaded amplification of DNA messengers among protocell communities Having established the feasibility of performing compartmentalized DSD reactions inside proteinosome-based protocells, we proceeded to determine whether the BIO-PC platform could be used to implement chemical communication among different proteinosome populations. Intercellular amplification of soluble messengers among different populations of cells is a characteristic feature of complex multicellular systems such as the immune system. To this end, we designed an inter-protocellular non-enzymatic DNA-based signalling cascade based on two proteinosome populations containing different streptavidin-anchored DNA gate complexes ( and ). The two proteinosome populations were loaded into the trap array sequentially, resulting in a random spatial arrangement of the binary population (). We aimed to keep the fractions of the two populations, χ and χ, as consistent as possible between the experiments and close to a 50/50 ratio. An externally added input strand diffuses into the protocells resulting in toehold-mediated displacement of a quencher-labelled output strand specifically in protocell population  which can be observed from the concomitant increase in Cy5 fluorescence associated with formation of an activated gate complex in population . Secretion of the released output strand () by population  functions as a chemical signal that is sensed by population  (). Detecting the signal strand via toehold-mediated strand displacement of a quencher labelled output strand () leads to higher Alexa546 fluorescence due to activation of the DNA gate complex in the second population of protocells. In this and subsequent experiments, flow was stopped after addition of the input strand (), to allow analysis of the diffusive communication between protocells. While protocells of population  implement a simple transducer functionality, where one input strand activates a single fluorescent DNA gate complex and leads to the secretion of one signal molecule, protocells of the second population can amplify their input signal. We implemented signal amplification by employing non-enzymatic DNA catalysis, which recycles the signal strand after its initial strand-displacement reaction using abundant fuel strands,. Without signal amplification (), the system response depends on the relative fraction of the two populations, with a 1:1 ratio resulting in approximately equal levels of DNA gate complex activation. When 1 μM fuel strand is added to the system (), population  can produce a much stronger response, and the final value depends on the concentration of encapsulated DNA gate complex determined by the streptavidin loading (). Importantly, as is expected from a cascaded network, a delay between the responses of the two populations is clearly visible ( inset,  and ). We also tested the signalling cascade in a well-mixed environment where components of the cascade are not separated by a semi-permeable membrane (). While the cascade functioned as expected, the delay between the activation of the first and second gate is much shorter as  does not have to diffuse over the membrane. Additionally, a stronger leakage signal was observed compared to the compartmentalized circuit implementation (). In a compartmentalized system the response characteristics of the binary population can also be tuned by changing the protocell membrane permeability (). To confirm the experimental observations, we simulated the two-population system using the Visual DSD software by solving the corresponding reaction-diffusion equations in 2D (). As can be observed from , the mathematical model can capture the most important features of the experimental data including the steady-state values, the time delay between the two populations and the effect of the fuel. While the experimental variability in dynamic behaviour between protocells is partly captured by the model, additional effects such as the size distribution of protocells and variance in protocell permeability are expected to further increase inter-protocell variability. To further demonstrate the scalability and orthogonality of the BIO-PC platform, we daisy-chained three protocell populations, each capable of strand transduction and fuel-induced signal amplification upon activation by its cognate input ( and ). To circumvent the need for three spectrally non-overlapping fluorescent dyes to monitor strand-displacement, we used a barcoding method where the protocell membrane was labelled with FITC, DyLight405 or a 1:1 mixture of the two (), allowing a single fluorophore (Cy5) to monitor all three DSD reactions. Upon addition of 10 nM of input strand and in the presence of 500 nM of each fuel strand, each population can produce an amplified response with respect to the previous population (). When the cascaded circuit is broken by omission of the second population, population  exhibits no response, while population  shows its normal response (). A control experiment with no input strand () shows a weak autoactivation caused by low signal leakage inherent to catalytic DSD reactions. Together, these results establish BIO-PC as a versatile platform to program diffusively connected compartmentalized cascades and reveal the high orthogonality of DNA-based molecular messengers. Bidirectional Communication and Distributed Sensing and Computing in Protocell Populations In living systems, intercellular communication via diffusible factors is often bidirectional and includes both positive and negative regulatory interactions. In addition, the distribution of functions across multiple cells is central to complex multicellular systems ranging from the immune system to neural networks. Here we use the BIO-PC platform to show the implementation of bidirectional communication and distributed sensing and processing of DNA-based inputs. The synthetic version of a bidirectional feedback loop ( and ) is based on two high- proteinosome populations where the activation of population  on addition of an input strand results in the secretion of a signal strand and a concomitant increase in Cy5 fluorescence. The secreted signal can activate protocells of population  which then respond with an increase in Cy3 fluorescence and fuel-amplified secretion of an orthogonal inhibitor strand that can deactivate population . The results demonstrate that after the input strand is added, population  is rapidly activated followed by a more gradual activation of population  and the simultaneous deactivation of population  ( and ). Decreasing the level of the input and fuel strands dampens the response in population  and delays its peak activation level; however, the pulse length remains unchanged (). In the absence of population , protocells in population  remain active (), confirming that negative feedback signalling occurs in the binary population. Without the input strand, the amplification module of population  exhibits low levels of leakage, while population  shows no response (). Analysis of the circuit under well-mixed conditions where gate complexes are free to diffuse in solutions shows that the transient response of the first gate, corresponding to population 1, is much weaker relative to the response of the second gate (). In addition, we observe a much stronger leakage signal under well-mixed conditions. The orthogonality of DSD circuitry makes it an excellent platform for implementing Boolean logic operations,. When combined with spatial segregation of components, it should be possible to design and construct amorphous computing devices capable of combinatorial sensing and distributed signal processing. As a proof of principle, we used the BIO-PC platform to implement a combinatorial sensing-and-processing device based on a community of three protocell populations comprising a network of two sensor populations with simple transducer functionality and one logic-gate population with either 2-input AND or OR function ( and ). Detailed kinetic characterization of the two multi-protocellular consortia revealed that the sensor modules are activated by their cognate input () and reported OR and AND computations according to the truth table (). To implement more complex computational functions, we designed a distributed computing device consisting of a serially layered OR and AND logic-gate population and showed that the system responds to the correct input patterns (, ). While these sensing and processing functions can also be implemented using non-compartmentalized DSD circuits, orthogonal strand-level design is critical and typically requires several optimization cycles to lower unwanted cross-hybridization and leakage reactions. The modular nature of BIO-PC, however, permits the use of non-orthogonal strands as DNA gates are physically separated. Indeed, under batch conditions the two modules of the serial logic circuit cross-hybridize and thereby render it inoperative (). Collectively, these results reveal that feedback control and complex computational operations can be engineered by a library of simple protocell modules communicating via orthogonal DNA messengers. Operation of DNA Circuits in a Biologically Relevant Environment One of the long-standing goals of DNA nanotechnology is to create autonomous molecular machines that can operate in harsh biological environments and provide drug-delivery or diagnostic functionality. Recent studies have shown that the functionality of simple DSD circuits is severely limited in cell culture medium with 10% foetal bovine serum (FBS) . We performed a series of experiments to investigate whether proteinosomes could be used to protect DSD networks from degradation in a biological environment. First, simple DSD circuit stability was tested under batch conditions (). The results show that the FBS-incubated DNA gate complex lost nearly all of its activity whilst the gate complex remains fully operational when incubated for the same amount of time in an aqueous buffer (). When the DNA gate complexes were now encapsulated inside BSA-reinforced () proteinosomes () and subjected to the same 48h incubation in 50% FBS, the system retained nearly all of its activity compared to incubation in 0% FBS (). Additionally, we tested whether localizing the DNA gate complexes to polystyrene beads similar in size to the proteinosomes would facilitate a protective effect and found that while some activity was retained after incubation in 50% FBS for 48h, most likely due to the steric hindrance of the nucleases (). The activity associated with the beads was considerably lower than a control experiment where the incubation was undertaken in a buffer solution (). To determine the feasibility of DNA-based inter-protocellular communication in a biologically relevant environment, we constructed a simple signalling cascade between two populations (). The binary protocell population was incubated in 50% FBS for 48h, placed into a microfluidic trap array and then activated by addition of 2 μM of input strand. All steps were performed in 50% FBS without any intermittent washing steps using aqueous buffers. The results show an immediate fluorescence response in the transducer population  associated with displacement of the quencher strand, followed by a slow increase in the fluorescence read-out from population  (). Approximately 2 μM of the DNA gate in the receiver population  is activated within 30 minutes (). Although the activity in population  is significantly reduced (), most likely due to signal strand degradation during transit through the serum-containing external environment, the results show that DNA signal transmission between the two protocell populations is possible in concentrated serum. These results confirm that encapsulation of DSD circuits in proteinosomes enables their operation in a biologically relevant environment and demonstrate the possibility of distributed DNA-based communication under challenging conditions. Biological systems employ diffusion-based molecular communication channels to distribute tasks and collectively adapt to their environment. Here we developed BIO-PC, a modular protocellular communication platform based on non-living components and demonstrate the successful design and characterization of a range collective behaviours. Our strategy is based on the streptavidin-mediated encapsulation of DNA templates inside protein-based semipermeable microcapsules that encode and decode molecular messages using DNA-based strand displacement reactions. The encapsulation of DNA strand displacement circuits has several unique advantages compared to their well-mixed counterparts. Firstly, even though the rate constant of toehold-mediated strand displacement is lower as a result of encapsulation and steric hindrance of the toehold by the proximity of streptavidin, the high local concentration of DNA gates inside proteinosomes results in a considerable decrease in circuit time scale from hours to minutes. Secondly, because the information processing components are physically separated from each other, well-characterized and high-performing parts can be reused. The design of non-localized strand displacement circuits relies on the use of DNA strands with highly orthogonal base-pairing interactions as this minimizes unintended cross-hybridization. As the encapsulated DNA gate complexes cannot cross-hybridize, only the diffusing messenger strands have to be designed with high orthogonality which should provide a considerable increase in scalability. Finally, co-encapsulation of DNA gates has the potential to exert greater control over directing reaction pathways by limiting diffusive transport of signals which allows insulation of key reactions from competing pathways. These important advantages could, for example, aid the design of multi-layer DNA-based winner-take-all circuits capable of classifying complex DNA or RNA-based information patterns. Furthermore, enzyme-free DNA strand displacement circuits can be used to process clinically relevant short RNA strands such as miRNA,. In order to simplify the analysis of compartmentalized DNA circuits, future work should be directed towards controlling the variability in the dynamic response of proteinosome-based protocells. This could be achieved by preparing proteinosome micro-droplets by microfluidic methods, which have been shown to result in proteinosome populations with narrower size distributions than those observed when using standard bulk methodologies, as employed in this study. BIO-PC allows a high degree of control over molecular communication by providing a tuneable barrier, a feature that makes it distinct from previous methods based on tethering rule-encoding DNA templates to surfaces. Our experimental results reveal that it is possible to independently tune the diffusive transport rate by preparing proteinosomes using different chemical cross-linkers (, ). Proteinosome porosity could also be addressed using degradable building blocks or changing the chemical composition of the protein-polymer nanoconjugate. While protocell-scale systems do not display the same levels of information-processing properties as living cells, their minimal and streamlined design could yield simple multicellular model systems with a high degree of control and the potential to uncover generalizable concepts,. Living cells utilize a high level of temporal control and a wide range of non-linear regulatory strategies, such as competition, shuttling and degradation of soluble factors, to tune intercellular communication dynamics,. The versatility of DNA-based chemical reaction networks allows implementation of these regulatory mechanisms by employing DNA-based threshold gates, time-delay circuits or exonuclease-assisted degradation of DNA messengers. Adding these functions to BIO-PC would facilitate the construction of a large library of protocell-protocell circuit motifs and a systematic analysis of their temporal behaviour. We anticipate that scalable architectures for distributed computation across populations of communicating protocells could enable complex information processing tasks for future diagnostic and therapeutic applications. Synthesis BSA-NH/PNIPAAm nanoconjugates Cationized BSA (BSA-NH) was synthesized according to a previously reported method. Typically, a solution of diaminohexane (1.5g, 12,9 mmol in 10 mL of MilliQ water) was adjusted to pH 6.5 using 5 M HCl and added dropwise to a stirred solution of BSA (200 mg, 3 μmol in 10 mL of MilliQ water). The coupling reaction was initiated by adding 100 mg of 1-(3-Dimethylaminopropyl)-3-ethylcarbodiimide HCl (EDC) immediately and another 50 mg after 5h. If needed, the pH value was readjusted to 6.5 and the solution was stirred for a further 6h and then centrifuged to remove any precipitate. The supernatant was then dialyzed (Medicell dialysis tubing, MWCO 12–14 kDa) overnight against MilliQ water and freeze-dried. End-capped mercaptothiazoline-activated PNIPAAM (M = 9800 g mol, 4 mg in 5 mL of MilliQ water) was synthesized according to the previously reported method and added to a stirred solution of BSA-NH (10 mg in 5 mL of PBS buffer at pH 8.0). The solution was stirred for 10 h and then purified using a centrifugal filter (Millipore, Amicon Ultra, MWCO 50 kDA), and freeze-dried. FITC- and DyLight405-labeled BSA-NH/PNIPAAm conjugates were prepared using the same method, except that labelled BSA () was used as the starting material. Preparing streptavidin-containing proteinosomes In a typical experiment, BSA-NH/PNIPAAm conjugates (final concentration: 8 mg mL), streptavidin (final concentration: 1, 4, or 10 μM) and 1.5 mg of PEG-bis(N-succinimidyl succinate) (Mw = 2000, approximately 38 PEG units on average) (or alternatively 2 mg of BS(PEG)5 to prepare proteinosomes with a lower permeability for ssDNA strands (low- proteinosomes)) were mixed in 30 μL of 50 mM sodium carbonate buffer (pH 9). 500 μL of 2-ethyl-1-hexanol was immediately added and the mixture was shaken by hand for 20 s to produce a Pickering emulsion. After 3 h of sedimentation, the upper clear oil layer was discarded, 800 μL of 70% ethanol was added and the emulsion was gently shaken. The dispersion was then sequentially dialyzed against 70% and 50% ethanol for 2 h each and finally against Milli-Q water for 24 h, resulting in polydisperse microcapsules (size range 10-60 μm) containing a distribution of encapsulated streptavidin (). The proteinosomes were then stored at 4°C for later use. Earlier studies have determined that proteinosomes have porous membranes with a molecular weight cutoff  40 kDa for labelled dextran. We found that the molecular weight cutoff for double stranded DNA (dsDNA) is much higher (> 200 bp in length, MW approximately 120 kDa, ), most likely due to the anisotropic shape of dsDNA, as opposed to the branched structure of dextran. We can expect that in addition to the size, which is slightly above the 40 kDa cutoff of dextran, streptavidin is also weakly crosslinked to some extent by the crosslinker, further assisting its stable encapsulation for such long periods of time. To produce fluorescently labelled proteinosomes, a 1:7 mixture of labeled (FITC, DyLight 405 or a 50/50 mixture of the two)/unlabelled BSA-NH/PNIPAAm conjugates was used. Initial experiments revealed that proteinosomes prepared using our existing method would abruptly result in osmotic collapse when placed into 50% FBS (). The proteinosomes used in the FBS experiments were therefore prepared using the same method, except that non-functionalized BSA (final concentration 60 mg/mL) was added to the aqueous phase and 2 mg of PEG-bis(N-succinimidyl succinate) was used as the crosslinking agent. The resulting proteinosomes were stable in FBS and had more gel-like interiors, as evidenced by FRAP analysis () Supplementary Figures S8 to S11 DNA strands were designed by hand with the help of a MATLAB script that generates random sequences with a desired fraction of each nucleotide. The design of the reactive DNA gates localized inside proteinosomes was mainly based on the “seesaw” gate motif of Qian and Winfree. Instead of using separate gate:output and reporter complexes, the fluorescent reporting functionality was built into the gate:output complex itself by labelling the gate strands (denoted as ) with a fluorophore (Cy5, Cy3 or Alexa546) and the output strands (denoted as ) with a quencher. All the gate strands have two chemical modifications – a biotin-TEG to facilitate binding to encapsulated streptavidin, and a fluorophore to monitor the DSD reaction. The two modifications were positioned at the opposite ends of the gate strands. In the initial inactive state, the gate strands were hybridized to complementary output strands, which had a quencher modification so that the fluorescence of a gate:output complex was quenched. We used a complementary input strand () to activate the gate by displacing the output strand via a toehold-mediated strand-displacement reaction, resulting in an active gate:input complex where the fluorophore is unquenched. In some experiments, the output strand of one gate was used as an input for another gate, thereby functioning as a signal strand. In addition, networks were designed to implement signal amplification using a fuel strand that reacted with the active gate:input complex to displace the input strand, yielding an active gate:fuel complex. The released input strand reacted with another gate:output complex, thereby functioning as a catalyst. The molecular reaction diagrams for all the DSD networks can be found in . The sequences and chemical modifications of all strands can be found in . DNA strands for the 3-stage cascade network, negative feedback and logic gates were designed by following a set of rules based on earlier studies: A three-letter nucleotide code was used for all strands (A, T, and G were used for the gate strands and A, T, and C for input, output, and fuel strands). No more than four consecutive A or T nucleotides (except for nonfunctional poly-T domains at the biotin end of certain gate strands that function as spacers), and no more than three consecutive C or G nucleotides were employed. All strands had a G (or C) fraction between 0.3 and 0.7. All sequences were tested with NUPACK to detect any possible undesired interactions and redesigned if necessary. All DNA oligonucleotides were purchased from Integrated DNA Technologies with HPLC purification. 100 μM and 10 μM stock solutions were made using nuclease free TE buffer (10 mM Tris, 0.1 mM EDTA, pH 8.0, Integrated DNA Technologies) and stored at -20°C. Localization of DNA gate complexes in streptavidin-containing proteinosomes The buffer for all experiments, unless otherwise specified, was 10 mM Tris (pH 8.0, Invitrogen) with 12 mM Mg (Invitrogen) and 0.1 % v/v Tween 20 (Sigma). In a typical localization experiment 10 μL of a dispersion of streptavidin-containing proteinosomes, 5 μL of 4X buffer and 2 μL of biotinylated DNA gate strand (from a 10 μM stock solution) were gently mixed with a pipette in a 1.5 mL Eppendorf tube and incubated at room temperature for 1 h, followed by addition of 3 μL output strand (from a 10 μM stock solution), gentle mixing and overnight incubation at 4°C. The excess unbound output strand was removed as follows: 10 μL of the supernatant was carefully removed from the top and discarded, 400 μL of buffer was added and the proteinosomes were resuspended by mixing with a pipette. The proteinosomes were allowed to sediment for 1 to 2 h or alternatively spun down using a microcentrifuge (4k RCF, for 5 min) and 400 μL of supernatant was removed from the top and discarded. This process was repeated and the resulting suspension of streptavin/DNA gate complex-containing proteinosomes stored at 4°C. Design and fabrication of microfluidic trapping devices We designed a two-layer microfluidic chip to facilitate the physical trapping and  imaging of populations of streptavidin/DNA-loaded proteinosomes. The chip () consisted of a 1.5 mm X 2 mm or 1.5 mm X 1.5 mm localization chamber with PDMS pillars, a filtering chamber, inlet channels with pneumatically actuated Quake style push-up valves and an outlet channel. Master moulds for the two layers were fabricated on separate silicon wafers (Silicon Materials) using standard photolithography techniques. The moulds for bottom and top layers were made by spin-coating SU8-3050 to a height of 50 μm, and spin-coating AZ 40xt to a height of 40 μm, respectively. After development the AZ 40xt mould was reflowed, resulting in rounded channels with a height of ~60 μm at the centre. The microfluidic chips were assembled from PDMS using standard multilayer soft lithography techniques and plasma bonded to circular #1.5 glass coverslips. Proteinosome trapping and activation The microfluidic trapping device was mounted on the stage of a confocal laser scanning microscope (CLSM, Leica SP8). Control channels were filled with MilliQ water and actuated using a pneumatic valve array (FESTO), which was in turn actuated using a programmable logic controller (PLC, WAGO Kontakttechnik GmbH). The PLC was connected to the Ethernet port of a PC and controlled using a custom Matlab GUI. The pressure in the control channels was 2 bar. The pressure to the inlet channels was controlled using adjustable pressure regulators (Flow-EZ, Fluigent). In a typical experiment, buffer solution was connected to inlet port 1. First, air bubbles were pushed out of the flow channels by pressurizing the buffer channel at 1 bar and closing all other inlet and outlet valves, followed by thoroughly washing all the flow channels using the buffer solution. Next streptavidin/DNA-containing proteinosomes were loaded into the trap array from inlet port 2 at a pressure of 10 mbar. The inlet port 2 was then closed and the proteinosomes were gently washed (the exact pressure needed to achieve enough flow for effective washing, but without forcing the protocells out of the traps depended on the fluidic resistance of the microfluidic setup and was experimentally determined beforehand; 5 to 15 mbar was normally used) with the buffer solution for 5 to 10 min to remove any unbound DNA. For multi-population experiments, in which it was critical that the unbound DNA was reduced to the minimum to avoid leakage reactions, the populations were loaded sequentially with intermittent washing periods. To ensure that protocells of different populations were well mixed, additional mixing steps were performed when necessary. Mixing was achieved by first flowing the prococell suspension in reverse direction into one of the input channels and then back into the trapping chamber, this process randomizes the spatial distribution of protocells from different populations. The confocal microscope was focused on the trapping chamber and time-lapse imaging was started. All the experiments were performed at room temperature. The initial steady-state signals were recorded as the baseline values. Supplementary Figures S5, S8 and S9 The input (and fuel, if used) DNA oligonucleotides were diluted (and mixed) to the desired concentration in buffer solution with 2 mg/mL BSA (Molecular Biology Grade, New England Biolabs) to minimize DNA adsorption to tubing and pipette tips and loaded to inlet port 3. The DSD reactions were started by flowing the input DNA into the trapping chamber using 10 mbar pressure for 20 seconds. For the single population experiments shown in , the pressure was then reduced to 3 mbar in order to maintain a slow flow (approximately 0.1μL/min) of input strand solution into the trapping chamber and thereby a constant input concentration in the extraprotocellular medium, as a constant input concentration is assumed by the mathematical model which was used for parameter estimation. For the experiments in -, the inlet and outlet valves were closed after the 20 second loading procedure and kept closed throughout the experiment to ensure that communication between different proteinosome populations occur via a diffusive mechanism, except when additional input or fuel strands are added to the trapping chamber ( and ). Incubation and activation of proteinosomes in concentrated foetal bovine serum (FBS) Proteinosomes (5 μL) with localized DNA gate complexes and loaded with non-functionalized BSA (60mg/mL added during assembly), 4X buffer solution (5 μL) and FBS (10 μL) were mixed in a 1.5 mL Eppendorf tube and incubated at room temperature for 48h. The localization of the proteinosomes in a microfluidic trap array was performed as described in the previous section, except that FBS was added (50% final v/v) to the washing buffer and also to the input DNA solution. Fluorescence data were acquired using a confocal laser scanning microscope (CLSM, Leica SP8) equipped with solid state lasers (405 nm for DyLight405, 488 nm for FITC, 552 nm for Cy3 and Alexa546, 638 nm for Cy5) and a hybrid detector. The time-lapse measurements were performed with either a 10X/0.40NA (1.55X1.55mm field of view, 7 μm slice thickness), or a 20X/0.75NA objective (0.775X0.775mm field of view, 2 μm slice thickness) at a resolution of 512X512 pixels. The photon counting mode of the hybrid detector was used. Concentration values of the activated DNA gate complexes were obtained from the relative fluorescence units (RFU) measured by the CLSM using the following procedure: First, the RFU values were corrected by subtracting the baseline value (baseline correction was not performed for the data of the logic gate circuits on  to give a more objective representation of the experimental variation between the different input configurations). The baseline-corrected values were then converted to activated DNA gate complex concentrations using calibration values of the corresponding activated gate complex. In order to rule out any N-quenching effects due to the input or fuel strand binding to the gate strand, all calibrations were performed using the corresponding gate:input or gate:fuel complexes instead of using free gate strands. Calibrations were performed by filling the microfluidic trapping chamber with 1 μM of the respective activated DNA gate complex, capturing a fluorescent image and recording the average RFU value over a straight line across the device (). The linearity of the detector and the method itself were verified by measuring the fluorescence of the activated DNA gate complex over a range of know concentrations (). Mathematical model and parameter estimation of proteinosome permeability and compartmentalized DSD reactions Using Fick’s first law, the diffusion of a DNA oligonucleotide  into a proteinosome can be described by the following ODE (its derivation is given in ):  where  is the strand  concentration inside the protocell,  is the strand  concentration outside the protocell,  (μm min) is the permeability constant of the proteinosome membrane and  is the radius of the proteinosome. The permeability constants in  were obtained by observing a fluorescently labeled strand  diffuse into a proteinosome population and measuring the concentrations ( and ) over time. For the low- proteinosomes the permeability constant was the rate-limiting step and could be determined from an experiment with DSD () by assuming all  that had entered the protocell reacted with the gate complex on a timescale much faster than the diffusion process. Thus, the gradient of  across the membrane can be assumed to be constant (equal to ) at the initial linear phase of the reaction and the permeability constant can be calculated by solving  (). For the high- proteinosomes, the diffusion process occurred at a much faster rate. Because it was not possible to separate the diffusion process from the DSD reaction as they occurred at a similar timescale, a different method was used to estimate the permeability constant. After the DSD reaction () had completed, the remaining free  was washed away, followed by an additional injection of . The diffusion of  was measured over time inside and outside the proteinosomes, and the permeability constant was estimated by non-linear least squares optimization of  using nonlinear least-squares solver (lsqnonlin, MATLAB) (). To estimate the DSD rate constants a model (shown graphically on ) consisting of the following ODEs was used. 

 where  is the concentration of the inactive gate complex,  is the concentration of the active gate complex and  (nM min) is the forward rate constant of the strand displacement reaction. The rate constants  and  in  were obtained by measuring the activated DNA gate complex concentration () over time and performing parameter estimation using a nonlinear least-squares solver (lsqnonlin, MATLAB) with the previously estimated  values as constants. 2D reaction-diffusion simulations Computational simulations of the 2-stage signalling cascade () were performed using the Chemical Reaction Network (CRN) tool of Visual DSD,, a software tool for designing and analysing DNA strand displacement networks. The Command Line Interface (CLI) of the tool was used and the configuration file was generated using a custom MATLAB script. A 2D model was used for the simulations; as in the experimental setup, the proteinosomes were placed on a 2D grid and the fluorescence data obtained from a 2D slice. Proteinosome positions were assigned based on the CAD drawing of the microfluidic device (), and the population (1 or 2) was randomly assigned for every proteinosome with a 1:1 ratio between the two populations. The encapsulated gate complex concentrations were sampled from a normal distribution based on the experimental measurements of the mean and variance of the encapsulated DNA gate concentrations of the respective proteinosome populations. The model was parametrized using the average DSD rate constant and permeability obtained from the analysis of the single-population DSD experiments. The radius, permeability and DSD rate constant were set to be the same across all the proteinosomes in order to simplify the mathematical model. The diffusion coefficient of the DNA oligonucleotides in the aqueous buffer was estimated using an empirical formula  = 4,9 * 10cm/s* [bp size] from an earlier study. The complete description of the mathematical model and computer code is given in . System simulation was performed by solving the reaction-diffusion equations with the CRN tool. NIHMS81460-supplement-Supporting_Information.pdf.